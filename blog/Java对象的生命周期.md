---
title: Java对象的生命周期
date: 2018-08-06 13:45:08
categories: Java后台
tags:
- Java
---



## Java对象的生命周期分为下面七个阶段
1. 创建阶段（Created）
2. 应用阶段（In Use）
3. 不可见阶段（Invisible）
4. 不可达阶段（Unreachable）
5. 收集阶段（Collected）
6. 终结阶段（Finalized）
7. 对象空间重新分配阶段（De-allocated）

<!-- more -->

## 创建阶段（Created）
系统创建对象的过程如下：  

- 为对象分配存储空间
- 开始构造对象
- 从超类到子类对类成员变量进行初始化
- 超类成员变量按顺序初始化，递归调用超类的构造方法
- 子类成员变量按顺序初始化，调用子类构造方法

一旦对象创建，并被赋给某些变量，这个对象就进入了下一个阶段，也就是应用阶段。

## 应用阶段（In Use）
对象至少被一个强引用持有着（需先了解一下强引用、弱引用、虚引用、软引用）。

## 不可见阶段（Invisible）
程序本身不再持有对象的任何强引用，但是这些引用任然可能存在着。一般来说就是程序的执行`超出对象的作用域`。例：  
```
for (int i = 0; i < 100; i++) {
	System.out.println(i);
}

System.out.println(i);
```

最后一行的i已经超出了它的作用域，此时称`i处于不可见阶段`。当然，这在编译时会报错。

## 不可达阶段（Unreachable）
是指对象不再被任何强引用持有着。但对象仍可能被JVM等系统下的某些已装载的静态变量或线程或JNI等强引用持有着，这些特殊的强引用被称为”GC root”。存在着这些GC root会导致对象的内存泄露情况，无法被回收。

## 收集阶段（Collected）
当垃圾回收器发现该对象已经处于“不可达阶段”并且垃圾回收器已经对该对象的内存空间重新分配做好准备时，则对象进入了“收集阶段”。如果该对象已经重写了finalize()方法，则会去执行该方法的终端操作。  
这里要特别说明一下：不要重载finazlie()方法！原因有两点：  
  
1. 会影响JVM的对象分配与回收速度
2. 可能造成该对象的再次“复活”

## 终结阶段（Finalized）
当对象执行完finalize()方法后仍然处于不可达状态时，则该对象进入终结阶段。在该阶段是等待垃圾回收器对该对象空间进行回收。

## 对象空间重新分配阶段（De-allocated）
垃圾回收器对该对象的所占用的内存空间进行回收或者再分配了，则该对象彻底消失了，称之为“对象空间重新分配阶段”。

原文地址：[http://blog.csdn.net/sodino/article/details/38387049](http://blog.csdn.net/sodino/article/details/38387049)


